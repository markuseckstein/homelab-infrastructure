services:
  # 1. n8n Community Edition
  n8n:
    image: n8nio/n8n:latest
    restart: always
    ports:
      - "5678:5678"
    environment:
      - N8N_COMMUNITY_PACKAGES_ENABLED=true
    volumes:
      - n8n_data:/home/node/.n8n

  # 2. Lokales LLM (Ollama)
  ollama:
    image: ollama/ollama:latest
    restart: always
    ports:
      - "11434:11434" # Ollama API Port
    environment:
      - OLLAMA_MODEL=Llama-3.2-3B
    volumes:
      - ollama_data:/root/.ollama
    # Tipp: Nutze "Llama-3.2-3B" oder "Phi-3", die laufen auf 16GB RAM flüssig

  # 3. Sprache-zu-Text (Faster-Whisper)
  whisper:
    image: fedirz/faster-whisper-server:latest-cpu
    restart: always
    ports:
      - "8081:8080"
    environment:
      - WHISPER_MODEL=tiny.en # oder 'base' für CPU-Schonung
  # 4. MQTT Broker (Zentrale Kommunikation)
  mosquitto:
    image: eclipse-mosquitto:latest
    restart: always
    ports:
      - "1883:1883" # MQTT Standard Port
      - "9001:9001" # WebSockets für Angular
    volumes:
      - mosquitto_data:/mosquitto/data
      - mosquitto_config:/mosquitto/config

  